(function(){function e(a,b,c){var e,i,k,l,m,n;if(!a)return;b||(b=[]),c||(c={});if(a.length!=null&&a[0]){n=[];for(o=0;o<a.length;o+=1)n.push(a[0]);a=n}else a=[a];d(b)||(b=[b]);for(var o=0;o<a.length;o+=1){e=a[o],m=e.nextSibling,l=e.parentNode,l!=null&&l.removeChild(e),f(e,b);for(var o=0;o<b.length;o+=1){k=b[o],i=e.fill.instances[o];for(var p=0;p<i.elements.length;p+=1)i.elements[p].fill.model=k;g(i,k),h(i,k,c,o),j(i,k,c)}m?l!=null&&l.insertBefore(e,m):l!=null&&l.appendChild(e)}return a}function f(a,b){var c,d,e;a.fill||(a.fill={});if(!a.fill.template){a.fill.template=[];while(a.firstChild)a.fill.template.push(a.removeChild(a.firstChild))}a.fill.templateCache||(a.fill.templateCache=[]),a.fill.instances||(a.fill.instances=[]);while(b.length>a.fill.instances.length){e=[];for(var f=0;f<a.fill.template.length;f+=1)c=a.fill.template[f].cloneNode(!0),e.push(c);d=a.fill.templateCache.pop()||{queryCache:{},template:e,elements:m(e)};for(var f=0;f<d.template.length;f+=1)a.appendChild(d.template[f]);a.fill.instances.push(d)}while(b.length<a.fill.instances.length){d=a.fill.instances.pop(),a.fill.templateCache.push(d);for(var f=0;f<d.template.length;f+=1)e=d.template[f],e.parentNode.removeChild(e)}for(var f=0;f<a.fill.instances.length;f+=1){d=a.fill.instances[f];for(var g=0;g<d.elements.length;g+=1){c=d.elements[g];for(var h in c.fill.attributes)c.setAttribute(h,c.fill.attributes[h])}}}function g(a,b){var d,e,f,g;if(typeof b=="object")for(d in b){e=b[d];if(typeof e!="object"&&typeof e!="function"){g=l(a,d);for(var h=0;h<g.length;h+=1)c(g[h],e)}}else f=l(a,"listElement")[0]||a.elements[0],f&&c(f,b)}function h(a,d,e,f){var g,h,i,j,k,m;for(var n in e){i=e[n];if(typeof i!="function")continue;k=l(a,n);for(var o=0;o<k.length;o+=1){j=k[o],h=i.call(d,j,f),typeof h=="string"&&(h={text:h}),c(j,h.text),b(j,h.html);for(g in h){if(g==="text"||g==="html")continue;j.fill.attributes=j.fill.attributes||{},j.fill.attributes[g]=j.getAttribute(g),m=h[g],j.setAttribute(g,m)}}}}function j(a,b,c){var d,f,g;for(d in b){f=b[d];if(typeof f!="object")continue;g=l(a,d);for(var h=0;h<g.length;h+=1)e(g[h],f,c[d])}}function k(b){return function(c,d){var e;if(!c||d==null)return;if(c.fill.content===d)return;c.fill.content=d;if(!c.fill.children){c.fill.children=[];for(i=0;i<c.childNodes.length;i+=1)e=c.childNodes[i],e.nodeType===a&&c.fill.children.push(e)}while(c.firstChild)c.removeChild(c.firstChild);b(c,d);for(i=0;i<c.fill.children.length;i+=1)c.appendChild(c.fill.children[i])}}function l(a,b){var c;if(!a.queryCache[b]){a.queryCache[b]=[];for(i=0;i<a.elements.length;i+=1)c=a.elements[i],n(c,b)&&a.queryCache[b].push(c)}return a.queryCache[b]}function m(b){var c,d,e,f=[];for(var g=0;g<b.length;g+=1){e=b[g];if(e.nodeType!==a)continue;e.fill||(e.fill={}),f.push(e),d=e.getElementsByTagName("*");for(var h=0;h<d.length;h+=1)c=d[h],c.fill||(c.fill={}),f.push(c)}return f}function n(a,b){var c=" "+a.className+" ";return a.id===b||c.indexOf(" "+b+" ")>-1||a.name===b||a.nodeName.toLowerCase()===b.toLowerCase()||a.getAttribute("data-bind")===b}var a=1,b,c,d=function(a){return Object.prototype.toString.call(a)==="[object Array]"};b=k(function(a,b){return a.innerHTML=b}),c=k(function(a,b){return a.nodeName.toLowerCase()==="input"?a.setAttribute("value",b):a.appendChild(a.ownerDocument.createTextNode(b))}),typeof jQuery!="undefined"&&jQuery!==null&&(jQuery.fn.fill=function(a,b){return e(this.get(),a,b),this}),typeof module!="undefined"&&module!==null&&(module.exports=e),this.fill=e}).call(this);